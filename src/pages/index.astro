---
import BaseLayout from "../layouts/BaseLayout.astro";
const pageTitle = "Mitch Pruitt | Designer & Developer";
---

<BaseLayout pageTitle={pageTitle} headerColor={"light"} footer={false}>
	<div class="intro-container">
		<section class="panel one">
			<div class="panel-content">
				<h2 class="howdy">Howdy! I'm Mitch.</h2>
				<h1 class="graphic">Graphic Designer</h1>
				<h1 class="product">Product Designer</h1>
				<h1 class="dev">& Front-End Dev</h1>
			</div>
		</section>
		<section class="panel two">
			<div class="panel-content">
				<h2 class="take">I take concepts, products, <br />and brands from zero to one</h2>
				<h1 class="numerals">1.000</h1>
			</div>
			</section>
		<section class="panel three">
			<div>
				<h1>Don't take my<br />word for it</h1>
				<h1>Check out my projects</h1>
			</div>
		</section>
	</div>
</BaseLayout>

<style>
	.intro-container {
		/* Keeps offscreen elements from blowing out layout */
		overflow-x: hidden;

		.panel {
			min-height: 100vh;
			width: 100%;
			display: flex;
			justify-content: center;
			align-items: center;
			padding: var(--h-padding) var(--v-padding);

			&.one {
				background-color: rgb(var(--darkest));

				.graphic, .product, .dev {
					margin-top: 16px;
				}
			}

			&.two {
				background-color: rgb(var(--primary));

				.panel-content {
					width: 85%;
					text-align: center;
				}

				.take {
					color: rgb(var(--darkest));
				}

				.numerals {
					color: rgb(var(--lightest));
					font-variation-settings: var(--extracondensed-black);
					font-size: 26vw;
					font-variant-numeric: tabular-nums;
				}
			}

			&.three {
				background-color: rgb(var(--lightest));
				h1 {
					color: rgb(var(--darkest));
				}
			}
		}

		h2 {
			color: rgb(var(--light));
			font-size: 4vw;
			clip-path: var(--full-clip);
		}

		h1 {
			color: rgb(var(--primary));
			font-variation-settings: var(--condensed-black);
			text-transform: uppercase;
			font-size: 10vw;
			line-height: .85;
			clip-path: var(--full-clip);
		}
	}
</style>

<script>
import {gsap, splitType, cleanText} from "../scripts/animation";

	gsap.set('main', {visibility: "visible"})

	// Panel One
	const graphicText = new splitType(".graphic", {types: 'words'})
	const graphic = graphicText.words

	const productText = new splitType(".product", {types: 'words'})
	const product = productText.words

	const devText = new splitType(".dev", {types: 'words'})
	const dev = devText.words

	// Panel Two
	const counter = document.querySelector(".numerals")


	gsap.timeline({
		scrollTrigger: {
			trigger: ".one",
			// markers: true,
			pin: true,
			scrub: 1,
			start: "top top",
			end: "+=2000",
			toggleActions: "play none none reverse"
		}
	},)
	.from(".howdy", {
		opacity: 1,
		xPercent: 7,
		yPercent: 50,
		fontSize: "8vw",
		duration: 1,
		ease: "power4.out"
	})
	.from(graphic, {
		opacity: 0,
		y: -200,
		stagger: 0.25,
		duration: 1,
		ease: "power4.out",
	})
	.from(product, {
		opacity: 0,
		y: -200,
		stagger: 0.25,
		duration: 1,
		ease: "power4.out",
	}, ">-1")
	.from(dev, {
		opacity: 0,
		y: -200,
		stagger: 0.25,
		duration: 1,
		ease: "power4.out",
	}, ">-1")
	
	gsap.timeline({
		scrollTrigger: {
			trigger: ".two",
			// markers: true,
			pin: true,
			scrub: 1,
			start: "top top",
			end: "+=6000",
			toggleActions: "play none none reverse"
		}
	})
	.from(counter, {
	textContent: 0.000000,
		duration: 5,
		ease: "expo.out",
		snap: {
			textContent: 0.000001
		},
		onUpdate: function () {
			// @ts-ignore 
			counter.textContent = parseFloat(counter.textContent).toFixed(6)
		}
	})
	.to(counter, {
		text: "& Beyond",
		ease: "power4.out",
		duration: 2
	}, ">+1")

	gsap.timeline({
		// scrollTrigger: {
		// 	trigger: ".three",
		// 	// markers: true,
		// 	pin: true,
		// 	scrub: 1,
		// 	start: "top top",
		// 	toggleActions: "play none none reverse"
		// }
	})
	.from(".three h1", {
		opacity: 0,
		x: 100,
		stagger: .5,
		duration: 1
	})

</script>